# 360Dialog WhatsApp Chat Interface

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ –≤ —Å—Ç–∏–ª–µ WhatsApp —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π 360Dialog API –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ WhatsApp Business API.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–†–µ–∞–ª—å–Ω—ã–µ WhatsApp —Å–æ–æ–±—â–µ–Ω–∏—è** —á–µ—Ä–µ–∑ 360Dialog API
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —à–∞–±–ª–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** (Template Messages)
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **Sandbox –æ–∫—Ä—É–∂–µ–Ω–∏–µ** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö, –ø–ª–∞–Ω—à–µ—Ç–æ–≤ –∏ –¥–µ—Å–∫—Ç–æ–ø–æ–≤
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **React 18** + **TypeScript**
- **Effector** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **Atomic Router** –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
- **Tailwind CSS** –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
- **shadcn/ui** –¥–ª—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **360Dialog WhatsApp Business API**

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd 360dialog

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
yarn install

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
yarn dev
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ 360Dialog API

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–∞

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ `START` –Ω–∞ –Ω–æ–º–µ—Ä `4930609859535` –≤ WhatsApp
2. –í—ã –ø–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –¥–ª—è sandbox –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –í–≤–µ–¥–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–ª—é—á –≤ –ø–æ–ª–µ "API Key" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞

**–í–∞–∂–Ω–æ**: –í sandbox –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è **—Ç–æ–ª—å–∫–æ –Ω–∞ —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏–ª API –∫–ª—é—á.

1. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ –ø–æ–ª–µ "Your Phone Number"
2. –ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `+1234567890`)
3. –≠—Ç–æ—Ç –∂–µ –Ω–æ–º–µ—Ä –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ webhook URL:

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å—ã —Ç–∏–ø–∞ [RequestBin](https://requestbin.com/) –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ webhook'–æ–≤

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–∞—Ç–∞
2. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à API –∫–ª—é—á 360Dialog
3. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏–ª API –∫–ª—é—á)
4. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç –∏–∑ —Å–ø–∏—Å–∫–∞
5. –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

### –®–∞–±–ª–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –∫–Ω–æ–ø–∫–∞ "Send Template Message" –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤:

```typescript
{
  templateName: "first_welcome_messsage",
  namespace: "c8ae5f90_307a_ca4c_b8f6_d1e2a2573574",
  parameters: [
    { type: "text", text: "Test User" }
  ]
}
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### API Layer (`src/shared/api/360dialog/`)

- **`types.ts`** - TypeScript —Ç–∏–ø—ã –¥–ª—è API
- **`client.ts`** - Effector —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è API –≤—ã–∑–æ–≤–æ–≤
- **`index.ts`** - Queries –∏ Mutations —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Farfetched

### Pages (`src/pages/chat/`)

- **`model.ts`** - Effector –º–æ–¥–µ–ª—å —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –ª–æ–≥–∏–∫–æ–π
- **`page.tsx`** - React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **`renderer.tsx`** - –†–µ–Ω–¥–µ—Ä–µ—Ä –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

### UI Components (`src/shared/ui/molecules/`)

- **`chat/`** - –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–∞—Ç–∞
- **`contact-list/`** - –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- **`message-list/`** - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- **`message-input/`** - –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- **`chat-header/`** - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞

## üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤:

- **–ú–æ–±–∏–ª—å–Ω—ã–µ** - –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º —Å –æ–≤–µ—Ä–ª–µ–π –º–µ–Ω—é –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- **–ü–ª–∞–Ω—à–µ—Ç—ã** - –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –ø–∞–Ω–µ–ª–µ–π
- **–î–µ—Å–∫—Ç–æ–ø** - –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —Å –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª—å—é

## üîå API Endpoints

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

```typescript
// –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
POST https://waba-sandbox.360dialog.io/v1/messages
{
  "to": "PHONE_NUMBER",
  "type": "text",
  "text": {
    "body": "Hello World"
  }
}

// –®–∞–±–ª–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
POST https://waba-sandbox.360dialog.io/v1/messages
{
  "to": "PHONE_NUMBER",
  "type": "template",
  "template": {
    "namespace": "NAMESPACE",
    "language": {
      "policy": "deterministic",
      "code": "en"
    },
    "name": "TEMPLATE_NAME",
    "components": [...]
  }
}
```

### Webhook

```typescript
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook
POST https://waba-sandbox.360dialog.io/v1/configs/webhook
{
  "url": "YOUR_WEBHOOK_URL"
}
```

## üö® –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Sandbox

–°–æ–≥–ª–∞—Å–Ω–æ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ 360Dialog](https://docs.360dialog.com/partner/api-reference/sandbox):

- **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–æ–ª—å–∫–æ –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞** - –∫–∞–∂–¥—ã–π API –∫–ª—é—á –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –æ–¥–Ω–æ–º—É –Ω–æ–º–µ—Ä—É
- **–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —à–∞–±–ª–æ–Ω—ã** - –º–µ–¥–∏–∞ —Ñ–∞–π–ª—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤ sandbox
- **–û–¥–∏–Ω API –∫–ª—é—á –Ω–∞ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏ –Ω—É–∂–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏
- **–ù–æ–º–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–º** - –µ—Å–ª–∏ –æ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç WhatsApp

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ 360Dialog API –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.360dialog.com/partner/api-reference/sandbox).
